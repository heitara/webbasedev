<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="serverMst">

	<resultMap class="com.gameif.portal.entity.ServerMst" id="serverResult">
		<result property="serverId" column="server_id" />
		<result property="titleId" column="title_id" />
		<result property="serverName" column="server_name" />
		<result property="serviceStartDate" column="service_start_date" />
		<result property="serviceEndDate" column="service_end_date" />
		<result property="serviceStatus" column="service_status" />
		<result property="serverDomain" column="server_domain" />
		<result property="playUrl" column="play_url" />
		<result property="chargeUrl" column="charge_url" />
		<result property="orderNum" column="order_num" />
		<result property="playersNum" column="players_num" />
		<result property="popularity" column="popularity_flag" />
		<result property="recommend" column="recommend_flag" />
		<result property="createdDate" column="created_date"/>
		<result property="createdUser" column="created_user"/>
		<result property="lastUpdateDate" column="last_update_date"/>
		<result property="lastUpdateUser" column="last_update_user"/>
	</resultMap>

	<select id="selectByKey" parameterClass="com.gameif.portal.entity.ServerMst" resultMap="serverResult">   
        <![CDATA[
		SELECT	server_id,
				title_id,
				server_name,
				service_start_date,
				service_end_date,
				service_status,
				server_domain,
				play_url,
				charge_url,
				order_num,
				players_num,
				popularity_flag,
				recommend_flag,
				created_date,
				created_user,
				last_update_date,
				last_update_user
		FROM	server_mst
		WHERE	server_id = #serverId#
		AND		title_id = #titleId#
        ]]>
	</select>

	<select id="selectValidServerList" resultMap="serverResult">
        <![CDATA[
        SELECT
			server_id,
			title_id,
			server_name,
			service_start_date,
			service_end_date,
			service_status,
			server_domain,
			play_url,
			charge_url,
			order_num,
			players_num,
			popularity_flag,
			recommend_flag,
			created_date,
			created_user,
			last_update_date,
			last_update_user
		FROM
			server_mst
		WHERE
			service_start_date <= now()
		AND service_end_date >= now()
        ]]>
	</select>

	<select id="selectValidServerListByTitle" resultMap="serverResult">
        <![CDATA[
        SELECT
			server_id,
			title_id,
			server_name,
			service_start_date,
			service_end_date,
			service_status,
			server_domain,
			play_url,
			charge_url,
			order_num,
			players_num,
			popularity_flag,
			recommend_flag,
			created_date,
			created_user,
			last_update_date,
			last_update_user
		FROM
			server_mst
		WHERE
			title_id = #value#
		AND	service_start_date <= now()
		AND service_end_date >= now()
        ]]>
	</select>

	<select id="selectServerByDomain" resultMap="serverResult">
        <![CDATA[
		SELECT	server_id,
				title_id,
				server_name,
				service_start_date,
				service_end_date,
				service_status,
				server_domain,
				play_url,
				charge_url,
				order_num,
				players_num,
				popularity_flag,
				recommend_flag,
				created_date,
				created_user,
				last_update_date,
				last_update_user
		FROM	server_mst
		WHERE	server_domain = #value#
        ]]>
	</select>

</sqlMap>