<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<include file="struts-default.xml" />

	<package name="gameif" extends="struts-default">
	
		<interceptors>
			<interceptor name="actionLogger" class="actionLoggerInterceptor"/>
			<interceptor-stack name="gameifStack">
				<interceptor-ref name="defaultStack"/>
				<interceptor-ref name="actionLogger"/>
			</interceptor-stack>
		</interceptors>
		
		<default-interceptor-ref name="gameifStack"/>
		<default-action-ref name="index"/>
		
		<global-results>
			<result name="unhandledException">/WEB-INF/pages/common/error.jsp</result>
			<result name="warning">/WEB-INF/pages/common/warning.jsp</result>
		</global-results>

		<action name="index" class="indexAction">
			<result name="index">/WEB-INF/pages/portal/index.jsp</result>
		</action>

		<action name="*Page" class="displayAction" method="{1}">
			<result name="finish">/WEB-INF/pages/common/finish.jsp</result>
		</action>

		<action name="*Member" class="memberInfoAction" method="{1}">
			<interceptor-ref name="scopedModelDriven">
				<param name="scope">request</param>
				<param name="name">memberInfo</param>
				<param name="className">com.gameif.portal.entity.MemberInfo</param>
			</interceptor-ref>
			<interceptor-ref name="checkbox">
				<param name="uncheckedValue">0</param>
			</interceptor-ref>
			<!-- 
			<interceptor-ref name="token">
				<param name="includeMethods">create</param>
			</interceptor-ref>
			 -->			
			<interceptor-ref name="gameifStack"></interceptor-ref>			
			<result name="input">/WEB-INF/pages/portal/mem_registry.jsp</result>
			<result name="success" type="redirect">/finishedPage.html?action=createMember</result>
			<result name="invalid.token">/WEB-INF/pages/common/warning.jsp</result>
		</action>

		<action name="*MemberInfo" class="memberInfoAction" method="{1}MemberInfo">
			<interceptor-ref name="scopedModelDriven">
				<param name="scope">request</param>
				<param name="name">memberInfo</param>
				<param name="className">com.gameif.portal.entity.MemberInfo</param>
			</interceptor-ref>
			<interceptor-ref name="checkbox">
				<param name="uncheckedValue">0</param>
			</interceptor-ref>
			<interceptor-ref name="token">
				<param name="includeMethods">updateMemberInfo</param>
			</interceptor-ref>			
			<interceptor-ref name="gameifStack"></interceptor-ref>			
			<result name="input">/WEB-INF/pages/portal/mem_info_edit.jsp</result>
			<result name="success" type="redirect">/finishedPage.html?action=updateMember</result>
			<result name="invalid.token">/WEB-INF/pages/common/warning.jsp</result>
		</action>

		<action name="*Password" class="memberInfoAction" method="{1}Password">
			<interceptor-ref name="scopedModelDriven">
				<param name="scope">request</param>
				<param name="name">memberInfo</param>
				<param name="className">com.gameif.portal.entity.MemberInfo</param>
			</interceptor-ref>
			<interceptor-ref name="checkbox">
				<param name="uncheckedValue">0</param>
			</interceptor-ref>
			<interceptor-ref name="token">
				<param name="includeMethods">updatePassword</param>
			</interceptor-ref>			
			<interceptor-ref name="gameifStack"></interceptor-ref>			
			<result name="input">/WEB-INF/pages/portal/mem_passwd_edit.jsp</result>
			<result name="success" type="redirect">/finishedPage.html?action=updatePasswd</result>
			<result name="invalid.token">/WEB-INF/pages/common/warning.jsp</result>
		</action>
		
		<action name="*Inquiry" class="inquiryInfoAction" method="{1}">
			<interceptor-ref name="scopedModelDriven">
				<param name="scope">request</param>
				<param name="name">inquiryInfo</param>
				<param name="className">com.gameif.portal.entity.InquiryInfo</param>
			</interceptor-ref>
			<interceptor-ref name="gameifStack" />
			
			<result name="input">/WEB-INF/pages/portal/inquiry_input.jsp</result>
			<result name="inputMedia">/WEB-INF/pages/portal/inquiry_media_input.jsp</result>
			<result name="inputMember">/WEB-INF/pages/portal/inquiry_member_input.jsp</result>
			<result name="success"  type="redirect">/finishedPage.html?action=createInquiry</result>
		</action>
		
		<action name="*Invite" class="inviteInputAction" method="{1}">
			<interceptor-ref name="scopedModelDriven">
				<param name="scope">request</param>
				<param name="name">inviteInfo</param>
				<param name="className">com.gameif.portal.entity.InviteInfo</param>
			</interceptor-ref>
			<interceptor-ref name="gameifStack" />
			<interceptor-ref name="store">
				<param name="operationMode">NONE</param>
			</interceptor-ref>
			
			<result name="input">/WEB-INF/pages/portal/invite_input.jsp</result>
			<result name="success"  type="redirect">/finishedPage.html?action=createInvite</result>
		</action>
	</package>
	
	<package name="gamejax" extends="json-default">
		<action name="*Exist" class="existCheckAction" method="{1}">
            <result type="json"></result>
		</action>
	</package>
</struts>